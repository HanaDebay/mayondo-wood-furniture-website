doctype html
html(lang="en")
  head
    meta(charset="UTF-8")
    meta(name="viewport" content="width=device-width, initial-scale=1.0")
    title View Stock | MWF Ltd
    link(rel="stylesheet" href="../css/viewStock.css")
    link(rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css")
    link(rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css")

  body
    .container.py-5
      h2.text-center.mb-4 ðŸ“¦ Available Stock

      .input-group.mb-3
        input#searchInput.form-control(type="text" placeholder="Search stock...")

      .table-responsive
        table.table.table-striped.table-bordered.align-middle
          thead.header-row
            tr
              th #
              th Product Name
              th Product Type
              th Quantity
              th Unit Price (UGX)
              th Supplier
              th Date Received
              th Quality
          tbody#stockTableBody
            each stock, index in stocks
              tr
                td #{index + 1}
                td #{stock.productName}
                td #{stock.productType}
                td #{stock.quantity}
                td #{stock.sellingPrice.toLocaleString()}
                td #{stock.supplierName || "N/A"}
                td #{stock.dateReceived ? stock.dateReceived.toISOString().substring(0,10) : "N/A"}
                td #{stock.quality || "N/A"}

    script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js")
    script.
      const stockTableBody = document.getElementById('stockTableBody');
      const searchInput = document.getElementById('searchInput');

      searchInput.addEventListener('input', function() {
        const filter = this.value.toLowerCase();
        const rows = stockTableBody.getElementsByTagName('tr');
        Array.from(rows).forEach(row => {
          const text = row.textContent.toLowerCase();
          row.style.display = text.includes(filter) ? '' : 'none';
        });
      });
