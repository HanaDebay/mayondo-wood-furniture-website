doctype html
html(lang="en")
  head
    meta(charset="UTF-8")
    meta(name="viewport" content="width=device-width, initial-scale=1.0")
    title MWF Sales Agent Dashboard
    link(href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet")
    link(href="../css/salesAgentDashboard.css" rel="stylesheet")

  body
    .sidebar
      img.profile-img(src="../images/salesAgentProfile.jpg" alt="Sales Agent Photo")
      h4#agentName= agent.fullName
      a(href="/sales-agent-dashboard") ğŸ“Š Dashboard
      a(href="/record-sale") ğŸ’µ Record Sale
      a(href="/view-stock") ğŸ“¦ View Stock
      a(href="/my-sales") ğŸ“ˆ My Sales Reports
      hr
      a(href="/index") ğŸ  Home
      hr
      a.text-danger(href="/logout") ğŸšª Logout

    .content
      h2.mb-4 ğŸ“Š Sales Agent Dashboard

      .row.mb-4
        .col-md-3
          .card.p-3
            h6 Total Sales (Month)
            h3#monthlySales UGX #{totalThisMonth.toLocaleString()}
        .col-md-3
          .card.p-3
            h6 Total Transactions
            h3#totalTransactions #{totalTransactions}
        .col-md-3
          .card.p-3
            h6 Pending Orders
            h3#pendingOrders 8
        .col-md-3
          .card.p-3
            h6 Stock Assigned
            h3#stockAssigned 120

      .row
        .col-md-12
          .card.p-3
            h6 Recent Transactions
            table.table.table-sm.table-striped
              thead
                tr
                  th Product
                  th Quantity
                  th Total Price
                  th Date
              tbody
                each sale in recentTransactions
                  tr
                    td= sale.productName
                    td= sale.quantity
                    td UGX #{sale.totalCost.toLocaleString()}
                    td= sale.dateOfSale.toISOString().substring(0, 10)
      .row.mt-4
        .col-md-12
          .card.p-3
            h6 Monthly Sales Chart
            canvas#monthlySalesChart(width="400" height="150")

    script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js")
    script(src="https://cdn.jsdelivr.net/npm/chart.js")
    script(src="../js/salesAgentDashboard.js")
    script.
      const monthlySalesData = !{JSON.stringify(monthlySalesByDay)};
