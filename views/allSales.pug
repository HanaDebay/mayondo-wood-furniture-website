extends managerDashboardLayout
block content
    .container.py-5
      h2.text-center.mb-4 All Sales Records

      .input-group.mb-3
        input#searchInput.form-control(type="text" placeholder="Search sales records...")

      .table-responsive
        table.table.table-striped.table-bordered.align-middle
          thead.header-row
            tr
              th #
              th Sales Agent
              th Product
              th Product Type
              th Quantity
              th Unit Price
              th Total Cost
              th Transportation
              th Customer Name
              th Payment Method
              th Date of Sale
              th Edit
              th Delete
          tbody#salesTableBody
            each sale, index in sales
              tr
                td #{index + 1}
                td #{sale.salesAgent ? (sale.salesAgent.fullName || sale.salesAgent.username) : 'Unknown Agent'}
                td #{sale.productName}
                td #{sale.productType}
                td #{sale.quantity}
                td #{sale.sellingPrice}
                td #{sale.totalCost}
                td #{sale.transportation} 
                td #{sale.customerName}
                td #{sale.paymentMethod}
                td #{sale.dateOfSale.toISOString().substring(0,10)}
                td
                  a.btn.btn-sm.btn-info(href=`/edit-sale/${sale._id}`)
                    i.bi.bi-pencil-fill
                td
                  form(action=`/delete-sale/${sale._id}?_method=DELETE` method="POST")
                    button.btn.btn-sm.btn-danger(type="submit" onclick="return confirm('Are you sure you want to delete this sale?')")
                      i.bi.bi-trash-fill
                td 
                  a.btn.btn-sm.btn-primary(href=`/receipt/${sale._id}` target="_blank") Download Receipt

    script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js")
    script(src="../js/allSales.js")
