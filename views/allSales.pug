extends managerDashboardLayout
block content
    .container.py-5
      h2.text-center.mb-4 All Sales Records
      .input-group.mb-3
        input#searchInput.form-control(type="text" placeholder="Search sales records...")
      .table-responsive
        table.table.table-hover.table-striped.table-bordered.align-middle.shadow-sm.rounded-3
          thead.header-dark.text-center
            tr
              th #
              th Sales Agent
              th Product
              th Type
              th Unit-Price
              th Quantity
              th Transportation
              th Total Cost
              th Date of Sale
              th Customer-Name
              th Payment-Method
              th Edit
              th Delete
              th Print Receipt
          tbody#salesTableBody
            each sale, index in sales
              tr
                td.text-center #{index + 1}
                td #{sale.salesAgent ? (sale.salesAgent.fullName || sale.salesAgent.username) : 'Unknown Agent'}
                td #{sale.productName}
                td #{sale.productType}
                td #{sale.sellingPrice}
                td.text-end #{sale.quantity}
                td #{sale.transportation}
                td.text-end #{sale.totalCost}
                td.text-center #{sale.dateOfSale.toISOString().substring(0,10)}
                td #{sale.customerName}
                td #{sale.paymentMethod}
                td.text-center
                  a.btn.btn-sm.btn-info(href=`/edit-sale/${sale._id}` title="Edit")
                    i.bi.bi-pencil-fill Edit
                td.text-center
                  form(action=`/delete-sale/${sale._id}?_method=DELETE` method="POST")
                    button.btn.btn-sm.btn-danger(type="submit" onclick="return confirm('Are you sure you want to delete this sale?')" title="Delete") 
                      i.bi.bi-trash-fill Delete
                td 
                  a.btn.btn-sm.btn-primary(href=`/get-receipt/${sale._id}` target="_blank" title="Print Receipt") Print Receipt
                    
  

    script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js")
    script(src="../js/allSales.js")
