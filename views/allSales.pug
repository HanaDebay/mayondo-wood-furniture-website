doctype html
html(lang="en")
  head
    meta(charset="UTF-8")
    meta(name="viewport" content="width=device-width, initial-scale=1.0")
    title All Sales | MWF Ltd
    link(rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css")
    link(rel="stylesheet" href="../css/allSales.css")
    link(rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css")
  body
    // Navbar
    nav.navbar
      .navbar-container
        .brand
          a(href="/") MWF
        ul.nav-links#navLinks
          li
            a(href="/manager-dashboard") Dashboard
          li
            a(href="/view-stock") View Stock
          li
            a(href="/logout") Logout
        button.nav-toggle(type="button" id="navToggle" aria-label="Toggle navigation") ☰

    .container.py-5
      h2.text-center.mb-4 All Sales Records

      .input-group.mb-3
        input#searchInput.form-control(type="text" placeholder="Search sales records...")

      .table-responsive
        table.table.table-striped.table-bordered.align-middle
          thead.header-row
            tr
              th #
              th Sales Agent
              th Product
              th Product Type
              th Quantity
              th Unit Price
              th Total Cost
              th Transportation
              th Customer Name
              th Payment Method
              th Date of Sale
              th Edit
              th Delete
          tbody#salesTableBody
            each sale, index in sales
              tr
                td #{index + 1}
                td #{sale.salesAgent.fullName || sale.salesAgent.username}
                td #{sale.productName}
                td #{sale.productType}
                td #{sale.quantity}
                td #{sale.sellingPrice}
                td #{sale.totalCost}
                td #{sale.transportation} 
                td #{sale.customerName}
                td #{sale.paymentMethod}
                td #{sale.dateOfSale.toISOString().substring(0,10)}
                td
                  a.btn.btn-sm.btn-info(href=`/edit-sale/${sale._id}`)
                    i.bi.bi-pencil-fill
                td
                  form(action=`/delete-sale/${sale._id}?_method=DELETE` method="POST")
                    button.btn.btn-sm.btn-danger(type="submit" onclick="return confirm('Are you sure you want to delete this sale?')")
                      i.bi.bi-trash-fill

    // Footer
    footer.site-footer.text-center.py-3.mt-5
      small © 
        span#year
        |  MWF Ltd • All rights reserved.

    script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js")
    script(src="../js/allSales.js")
