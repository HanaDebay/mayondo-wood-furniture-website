extends managerDashboardLayout

block content
  .main-content.p-4.bg-light
    h2.text-center.mb-2 ðŸ“Š Manager Dashboard
    h4.text-center.mb-4 Welcome back #{manager.fullName}!

    // KPI Cards â€” responsive
    .row.g-4.mb-5
      .col-12.col-md-6.col-lg-3
        .card.p-3.text-center.bg-light.border-0.shadow-sm
          i.fas.fa-shopping-cart.text-success.fa-2x.mb-2
          h5 Total Purchase
          h4#totalPurchase 

      .col-12.col-md-6.col-lg-3
        .card.p-3.text-center.bg-light.border-0.shadow-sm
          i.fas.fa-money-bill-wave.fa-2x.text-success.mb-2
          h5 Total Sales(This Month)
          h4#totalSales #{totalSalesThisMonth.toLocalString} UGX

      .col-12.col-md-6.col-lg-3
        .card.p-3.text-center.bg-light.border-0.shadow-sm
          i.fas.fa-users.fa-2x.text-warning.mb-2
          h5 Revenue(This Month)
          h4#revenu 

      .col-12.col-md-6.col-lg-3
        .card.p-3.text-center.bg-light.border-0.shadow-sm
          i.fas.fa-boxes.fa-2x.text-danger.mb-2
          h6 Low Stock
          ul#lowStockList
            li 

    // Row 2 KPI Cards
    .row.g-4.mb-5
      .col-12.col-md-6.col-lg-3
        .card.p-3.text-center.bg-light.border-0.shadow-sm
          i.fas.fa-percent.text-primary.fa-2x.mb-2
          h6 Profit Margin
          h6 Current Report
          span#grossProfit #{grossProfit.toLocaleString()} UGX

      .col-12.col-md-6.col-lg-3
        .card.p-3.text-center.bg-light.border-0.shadow-sm
          i.fas.fa-users.fa-2x.text-warning.mb-2
          h6 Sales Agents
          h4#totalAgents #{attendantsCount}

      .col-12.col-md-6.col-lg-3
        .card.p-3.text-center.bg-light.border-0.shadow-sm
          i.fas.fa-boxes.fa-2x.text-danger.mb-2
          h6 Stock Items
          h4#totalStock= furnitureCount

      .col-12.col-md-6.col-lg-3
        .card.p-3.text-center.bg-light.border-0.shadow-sm
          i.fas.fa-money-bill-wave.fa-2x.text-success.mb-2
          h6 Total Sales
          h4#totalSales #{new Intl.NumberFormat().format(totalSalesThisMonth)} UGX

    // Charts
    .row.g-4.mb-5
      .col-12.col-lg-6
        .card.p-3
          h5.card-title Sales per Agent
          canvas#barChart(width="400" height="200")

      .col-12.col-lg-6
        .card.p-3
          h5.card-title Category Breakdown
          canvas#pieChart(width="400" height="200")

      .col-12.col-lg-6
        .card.p-3
          h5.card-title Monthly Sales
          canvas#lineChart(width="400" height="200")

    // Top Customers & Activity Log
    .row.g-4.mb-5
      .col-12.col-lg-6
        .card.h-100.d-flex.flex-column
          .card-body.d-flex.flex-column
            h5.card-title Top Customers
            ul.list-group.flex-grow-1.overflow-auto#topCustomers
              li.list-group-item Loading...

      .col-12.col-lg-6
        .card.h-100.d-flex.flex-column
          .card-body.d-flex.flex-column
            h5.card-title Attendant Activity Log
            .table-responsive.flex-grow-1.overflow-auto
              table.table.table-striped.mb-0
                thead
                  tr
                    th Agent
                    th Activity
                    th Date
                tbody
                  tr
                    td(colspan="3") Loading...

    // Scripts
    script(src="https://cdn.jsdelivr.net/npm/chart.js")
    script(src="../js/dashboard.js")
    script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js")
