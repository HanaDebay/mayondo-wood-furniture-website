doctype html
html(lang="en")
  head
    meta(charset="UTF-8")
    meta(name="viewport" content="width=device-width, initial-scale=1.0")
    title MWF Manager Dashboard
    link(href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet")
    link(href="../css/dashboard.css" rel="stylesheet")

  body
    // Sidebar
    .sidebar
      img.profile-img(src="../images/managerProfile.jpg" alt="Manager Photo")
      h4#managerName= manager.fullName
      a(href="/manager-dashboard") ğŸ“Š Dashboard
      a(href="/register-user") ğŸ‘¨â€ğŸ’¼ Register Sales-Agent
      a(href="/register-supplier") ğŸ­ Register Supplier
      a(href="/registerFurniture") ğŸ›‹ï¸ Add Furniture Stock
      a(href="/registerWood") ğŸªµ Add Wood Stock
      a(href="/all-sales") ğŸ’° Generate Sales Reports
      a(href="/view-user") ğŸ§‘â€ğŸ’¼ View Users
      a(href="#viewStockSubmenu" class="d-block text-decoration-none" data-bs-toggle="collapse" role="button" aria-expanded="false" aria-controls="viewStockSubmenu") ğŸ“„ View Stock
      div.collapse.ms-3#viewStockSubmenu
        a(href="/view-wood-stock" class="d-block text-decoration-none mt-1") ğŸªµ Wood Stock
        a(href="/view-furniure-stock" class="d-block text-decoration-none mt-1") ğŸ›‹ï¸ Furniture Stock

      hr
      a(href="/index") ğŸ  Home
      hr
      a.text-danger(href="/logout") ğŸšª Logout

    // Content Area
    .content
      h2.mb-4 ğŸ“Š Manager Dashboard

      // Top Cards
      .row.mb-4
        .col-md-3
          .card.p-3.card-bg-color            
            .card.p-3.card-bg-color-two
              h4 Purchase Costs
              h5 Wood Stock
              p 
                | Wood Stock: 
                span#woodCost 0 UGX
              h5 Furniture Stock
              p 
                | Furniture Stock: 
                span#furnitureCost 0 UGX
              h5 Total Purchase
              p 
                | Total: 
                span#totalPurchase 0 UGX
        .col-md-3
          .card.p-3
            .card.p-3
              .card.p-3
                h6 Total Sales (Month)
                h4#totalSales #{new Intl.NumberFormat().format(totalSalesThisMonth)} UGX
        .col-md-3
          .card.p-3
            h6 Attendants
            h3#attendants #{attendantsCount}
        .col-md-3
          .card.p-3
            h6 Suppliers
            h3#suppliers #{suppliersCount}

      // Charts
      .row.mb-4
        .col-md-6
          .card.p-3
            h5.card-title Sales per Agent
            canvas#barChart(width="400" height="200")
        .col-md-6
          .card.p-3
            h5.card-title Category Breakdown
            canvas#pieChart(width="400" height="200")

      // Sales Trend
      .row.mb-4
        .col-md-12
          .card.p-3
            h5.card-title Monthly Sales
            canvas#lineChart(width="400" height="200")

      // Top Customers & Attendant Activity
      .row
        .col-md-6.mb-4
          .card
            .card-body
              h5.card-title Top Customers
              ul.list-group#topCustomers
                li.list-group-item Loading...


        .col-md-12.mb-4
          .card
            .card-body
              h5.card-title Attendant Activity Log
              table.table.table-striped
                thead
                  tr
                    th Agent
                    th Activity
                    th Date
                tbody
                  tr
                    td(colspan="3") Loading...


    script(src="https://cdn.jsdelivr.net/npm/chart.js")
    script(src="../js/dashboard.js")
    script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js")

